{% extends template %}
{% block content %}
<main class="in-main">
<br>
<h1><b>ã€€è¨­å‚™ç§Ÿå€Ÿ</b></h1>
<div>
    <input class="reto-btn-patient" type="button" value="è¨­å‚™æ­¸é‚„" onclick="location.href='../rehabilitator_rentalback'" >
</div>
<br>

<!-- èº«åˆ†è­‰åœ“æ ¼å­ -->
<div class="in-main-explain"  >
  <p>æ©Ÿå™¨ç›®å‰å…±æœ‰{{ kinect_amount }}å°å¯ä¾›ä½¿ç”¨ï¼Œç§Ÿé‡‘ç‚º$NT800/æœˆï¼Œä½¿ç”¨é ˆéµå®ˆä»¥ä¸‹è¦ç¯„
   <p> 1.ä½¿ç”¨æ™‚è«‹å‹¿é‡æ‘”ç­‰æå®³æ©Ÿå™¨ä¹‹è¡Œç‚ºï¼Œå¦‚æå£éœ€æŒ‰ç…§é™¢å…§è¦å®šé€²è¡Œè³ å„Ÿ
   <p>  2.ä½¿ç”¨å®Œç•¢å¾Œï¼Œè«‹æ•´ç†å¥½ç·šæå¦¥å–„ä¿å­˜
   <p>  3.è«‹æ–¼ç§Ÿå€ŸæœŸé™å…§æ­¸é‚„ï¼Œæœ‰å€Ÿæœ‰é‚„ï¼Œå†å€Ÿä¸é›£
</div>
<br><br><br><br><br>
<div class="in-main-explain-lease" style="background: #DAE3F3">
<br>
<div class="in-main-explain-lease-content">
	<p></p><p></p>

	<div><a style="font-size: 40px"><b>æ©Ÿå™¨</b></a></div>
	<div style="height: 210px;  overflow-y:scroll;" class="scrollbar-style">
        {% for kinect in kinects %}
            <input type='button' class="in-main-explain-lease-content-bar" id="kinect" value="{{ kinect.id }}" onClick='kinectbtn(this.value)' >
        {% endfor %}
	</div>
</div>
<div class="in-main-explain-lease-content">
	<p></p><p></p>
	<!--<form method="post"> -->
	<div>
		<div style="display:inline"><a style="font-size: 40px;display:inline"><b>ç—…æ‚£</b></a>
			<form method="post" style="display:inline">
				<input type="text" required style="height:20%; width:200px; line-height:50px; border:none; display:inline; background-color: #FFFFFF" />
				<input type="submit" required  style="height: 45px; line-height:40px;text-align: center;" value="ğŸ”" />
			</form></div>
		<div style="height: 210px; overflow-y:scroll; " class="scrollbar-style">
            {% for patient in patients %}
                <input type='button' class="in-main-explain-lease-content-bar-patient" id="patient" value="{{ patient.1 }}" onClick='patientbtn(this.value)' >
            {% endfor %}
	    </div>
		<!--<input type="submit" style="height: 50px;line-height: 50px" />	-->
	</div>
	<!--</form>-->
</div>
<br><br><br><br><br>
<form method="post" style="height: 60%;width: 100%" >
    {% csrf_token %}
	<div style="float: left; width: 40%;margin-left: 20px">
		èµ·ç§Ÿæ—¥ <input type="date" required style="height: 15%;border: none" id="sel_date" />
	</div>
	<div style="float: left; width: 40%;margin-left: 50px">
		æ™‚é–“(æœˆ) <input type="text" border="0" required style="height: 15%;border: none" pattern="^[0-9]" id="period" />
	</div>
	<div style="float: left; width: 10%; margin-left: 35px">
		<input type="submit" style="" class="in-main-notice-button" value="ç§Ÿå€Ÿ" id="lendBtn" />
	</div>
</form>
</div>
<br>
</main>
    <script>
        var kinectid=0;
        var patientid='';
        var notsel = document.getElementsByClassName("in-main-explain-lease-content-bar");
        var notsel_p = document.getElementsByClassName("in-main-explain-lease-content-bar-patient");

        function kinectbtn(kinect_id) // é¸æ“‡æ©Ÿå™¨
        {
            kinectid = kinect_id;
            console.log(kinectid);  // 1

            /*for(var i=0;i<notsel.length;i++){
                notsel[i].className = "in-main-explain-lease-content-bar";

                if(notsel[i]==kinect_id)
                    notsel[i].className +=" in-main-explain-lease-content-bar-selected";
                console.log(notsel[i]+notsel[i].className)
            };*/
            for (var [key] of Object.entries(notsel)) {
                notsel[key].className = "in-main-explain-lease-content-bar";
                //console.log(key+kinect_id);
                if(notsel[key].value==kinect_id)
                    notsel[key].className +=" in-main-explain-lease-content-bar-selected";
                //console.log(key+value)
            }


        }

        function patientbtn(id) // é¸æ“‡æ©Ÿå™¨
        {
            patientid = id;
            console.log(patientid);  // 1

            for (var [key] of Object.entries(notsel_p)) {
                notsel_p[key].className = "in-main-explain-lease-content-bar-patient";
                //console.log(key+kinect_id);
                if(notsel_p[key].value==patientid)
                    notsel_p[key].className +=" in-main-explain-lease-content-bar-patient-selected";
                //console.log(key+value)
            }
        }

        $('#lendBtn').click(function () {
            var sel_date = document.getElementById("sel_date").value;
            var period = document.getElementById("period").value;
            //var sel_date = temp[0]+temp[1]+temp[2];
            console.log("å€Ÿå‡ºå»äº†");
            console.log(sel_date)
            console.log(period)
            if(kinectid==null || patientid==null ||sel_date==null||period==null)
                return;

            $.ajax({
                type: 'GET',
                url: '/rehabilitator_rentalrecords',
                data: {'sel_kinect':kinectid,'sel_patient':patientid ,'sel_date':sel_date,'period':period}
            });
        });
    </script>
{% endblock %}
